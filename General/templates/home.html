{% extends "base.html" %}




{% block cssblock %}
{% load static %}

<link rel="stylesheet" type="text/css" href="{% static 'user_detail/style.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'home/style.css' %}">
{% endblock %}


{% block content  %}
{% if not active.JusetUsers %}

{% if messages %}
<div class="card">
  <ul class="list-unstyled messages">
  {% for message in messages %}
    
      <li class="alert alert-{{ alert_tag }}">{{ message }}</li>
   
  </ul>
  {% endfor %}
</div>
{% endif %}


<style type="text/css">

.blur{
filter: blur(2px);
transition: all 1s;
}

.noblur{
    transition: all 2s;
}
#b_img_S1{
    height: 300!important;
}
#b_img_S2{
    height: 300!important;
}
</style>
<style type="text/css">

.h7 {
    font-size: 0.8rem;
}

.gedf-wrapper {
    margin-top: 0.97rem;
    }

@media (min-width: 992px) {
        .gedf-main {
            padding-left: 4rem;
            padding-right: 4rem;
        }
        .gedf-card {
            margin-bottom: 2.77rem;
            }
        }

/**Reset Bootstrap*/
.dropdown-toggle::after {
    content: none;
    display: none;
}

.profile-card-22 .profile {
    border-radius: 50%;
    max-width: 100px;
    max-height: 100px;
    border: 3px solid rgba(255, 255, 255, 1);
    -webkit-transform: translate(-50%, 0%);
    transform: translate(-50%, 0%);
    background-color: white;
    box-shadow: 0px 0px 4px 0px #b0b3b7;
}

.IconBtn{
    font-size: 20px;
}
.contop{
    padding-bottom: 0px;
}
</style>



<div class="row">
<div class="col-lg-8 gedf-main">
    <br class="d-lg-block">

    
{% if active.RecommendedPosts %}
    {% for recommended in posts %}
        {% if recommended.post.draft %}
        {% else %}
            <div class="card gedf-card PostData" id="idpost{{recommended.post.slug}}" pk="{{recommended.pk}}">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="profile-card-22 ml-3">
                                <a href="{{recommended.post.author.profile.get_absolute_url}}">
                                    <img  id="p{{recommended.post.id}}" class="rounded-circle profile " width="45" height="45" src="https://drive.google.com/thumbnail?id=1hn-jqy47zD8v0RnKzd9WufbxgBloDrsn" alt="">
                                </a>
                                <script type="text/javascript">
                                    var img_S{{ recommended.post.id }}{{ recommended.post.slug }} = document.getElementById("p{{ recommended.post.id }}")
                                    var img_B{{ recommended.post.id }}{{ recommended.post.slug }} = document.createElement('img')
                                    img_B{{ recommended.post.id }}{{ recommended.post.slug }}.onload = function(){
                                        img_S{{ recommended.post.id }}{{ recommended.post.slug }}.src = this.src
                                    }
                                    setTimeout(function(){
                                       img_B{{ recommended.post.id }}{{ recommended.post.slug }}.src = '{{ recommended.post.author.profile.image.url }}' 
                                    },50)  
                                    
                                </script>
                            </div>
                            <div>
                                <a href="{{recommended.post.author.profile.get_absolute_url}}" class="card-title userlinkname">
                                    <div class="h5 m-0 ">
                                        {{recommended.post.author.first_name}}
                                        {% if recommended.post.author.profile.veryfied %}
                                            <li class="material-icons mb-1" data-toggle="tooltip" data-placement="top" title="Trusted" style="color:#007bff;">done_all</li>
                                        {% endif %}
                                    </div>
                                </a>
                                <div class="h7 text-muted">{{recommended.post.author.profile.user.username|truncatechars:30}}
                                    {% if user.profile in recommended.post.author.profile.following.all %}
                                        | <n class='bg-light'> Follows You</n>
                                    {% endif %} 
                                </div>
                            </div>
                                
                        </div>
                        <div>
                            {% if request.user.is_authenticated %}
                            {% if request.user == recommended.post.author %}
                            <div class="dropdown">
                                <button class="btn btn-link dropdown-toggle" type="button" id="gedf-drop1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                </button>
                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="gedf-drop1">
                                    
                                        <a class="dropdown-item" href="{{post.post_edit_url}}">Edit</a>
                                        <a class="dropdown-item" href="" data-toggle="modal" data-target="#confirm-delete{{post.slug}}">Delete</a>
                                        
                                    
                                    

                                </div>
                            </div>
                            {% endif %}
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="card-body"><a  class="text-dark userlinkname" href="{{recommended.post.get_absolute_url_2}}">
                    <div class="text-muted h7 mb-2">
                        <i class="fa fa-clock-o"></i> {{recommended.post.date_posted|timesince}} ago 
                        {% if recommended.post.draft %}
                            <b class="fa fa-lock" data-toggle="tooltip" data-placement="top" title="private"></b>
                        {% endif %}
                    </div>
                    
                        <p id="content{{recommended.post.id}}" class="card-text">
                            {{recommended.post.content}}
                        </p>
                    {% if recommended.post.links %}
                    
                    <script type="text/javascript">
                        $("#content{{recommended.post.id}}").each(function() {
                        var text = $(this).html()
                        //alert("1- "+text)
                        {% for link in recommended.post.links_all %}
                        var link2 = '{{link}}'.replace(" ","");
                        var link3 = '{{link|truncatechars:30}}'.replace(" ","");
                        //text = text.replace('{{link}}',"<a href='{{link}}'>{{link}}</a>");
                        text = text.replace('{{link}}'," <a class='userlinkname' target='_blank' href='"+link2+"'>"+link3+"</a> ");

                        {% endfor %}
                        //alert("2- "+text)
                        $(this).html(text);
                        });

                    </script>
                    

                    {% endif %}
                        {% if recommended.post.image %}
                            <img class="card-img profile blur" height="375px" src="https://drive.google.com/thumbnail?id=19s9HLijaKopNDDWZ2TFYmxehLHybqkSj" id="i{{recommended.post.id}}">
                            <script type="text/javascript">
                                var img_S2{{ recommended.post.id }}{{ recommended.post.slug }} = document.getElementById("i{{ recommended.post.id }}")
                                var img_B2{{ recommended.post.id }}{{ recommended.post.slug }} = document.createElement('img')
                                img_B2{{ recommended.post.id }}{{ recommended.post.slug }}.onload = function(){
                                    img_S2{{ recommended.post.id }}{{ recommended.post.slug }}.src = this.src
                                    img_S2{{ recommended.post.id }}{{ recommended.post.slug }}.className = "card-img profile noblur";

                            
                                }
                                setTimeout(function(){
                                img_B2{{ recommended.post.id }}{{ recommended.post.slug }}.src = '{{recommended.post.image.url}}' 
                                },50)  

                          
                            </script>
                        {% endif %}
                    </a>
                </div>
                <div class="card-footer">
                    {% if request.user.is_authenticated %}

                        {% if request.user.profile in recommended.post.likes.all %}
                            <a id="{{recommended.post.id}}" href="{{recommended.post.add_like_url}}" data-href="{{recommended.post.api_add_like_url}}" class="card-link text-primary LikeBtn IconBtn "><i class="fa fa-heart "></i> <b class="LikeCount{{recommended.post.id}}" num='{{recommended.post.likes.count}}'>{{recommended.post.likes.count}}</b></a>
                        {% else %}
                            <a id="{{recommended.post.id}}" href="{{recommended.post.add_like_url}}" data-href="{{recommended.post.api_add_like_url}}" class="card-link text-secondary LikeBtn IconBtn "><i class="fa fa-heart "></i> <b class="LikeCount{{recommended.post.id}}" num='{{recommended.post.likes.count}}'>{{recommended.post.likes.count}}</b></a>
                        {% endif %}

                    {% else %}
                        <a  href="{% url 'login' %}"  class="card-link text-secondary  IconBtn "><i class="fa fa-heart "></i> <b>{{recommended.post.likes.count}}</b></a>

                    {% endif %}
                        <n class="card-link text-secondary IconBtn"><i class="fa fa-comment"></i><b> {{recommended.post.comments_all.count}}</b></n>

                        <a  id="c{{recommended.post.id}}" href="" link='http://localhost:8000{{recommended.post.get_absolute_url_2}}'  class="card-link text-secondary IconBtn ShareBtn"><i class="fa fa-share-alt"></i></a>
                </div>
            </div>
            {% if request.user == recommended.post.author %}
                <div class="modal fade" id="confirm-delete{{recommended.post.slug}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5>Delete Post</h5>
                            </div>
                            <div class="modal-body">
                                <h5>Are you sure you want to <b>delete</b> this post?</h5>
                            </div>
                            <div class="modal-footer">                   
                                <a id="post{{recommended.post.slug}}" class="btn btn-danger btn-ok PostDelete " href="{{user.profile.get_absolute_url}}" data-href='{{recommended.post.delete_post_api_url}}'> 
                                    Yes, Delete <b> </b>
                                </a>
                                <button type="button" class="btn btn-default close1" data-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}
                <br class="d-block d-lg-none">
        {% endif %}
                
    {% endfor %}
{% endif %}

{% if active.NoramlPosts %}
    {% for post in posts %}
        
            <div class="card gedf-card PostData" id="idpost{{post.slug}}">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="profile-card-22 ml-3">
                                <a href="{{post.author.profile.get_absolute_url}}">
                                    <img  id="p{{post.id}}" class="rounded-circle profile " width="45" height="45" src="https://drive.google.com/thumbnail?id=1hn-jqy47zD8v0RnKzd9WufbxgBloDrsn" alt="">
                                </a>
                                <script type="text/javascript">
                                    var img_S{{ post.id }}{{ post.slug }} = document.getElementById("p{{ post.id }}")
                                    var img_B{{ post.id }}{{ post.slug }} = document.createElement('img')
                                    img_B{{ post.id }}{{ post.slug }}.onload = function(){
                                        img_S{{ post.id }}{{ post.slug }}.src = this.src
                                    }
                                    setTimeout(function(){
                                       img_B{{ post.id }}{{ post.slug }}.src = '{{ post.author.profile.image.url }}' 
                                    },50)  
                                    
                                </script>
                            </div>
                            <div>
                                <a href="{{post.author.profile.get_absolute_url}}" class="card-title userlinkname">
                                    <div class="h5 m-0 ">
                                        {{post.author.first_name}}
                                        {% if post.author.profile.veryfied %}
                                            <li class="material-icons mb-1" data-toggle="tooltip" data-placement="top" title="Trusted" style="color:#007bff;">done_all</li>
                                        {% endif %}
                                    </div>
                                </a>
                                <div class="h7 text-muted">{{post.author.profile.user.username|truncatechars:30}}
                                    {% if user.profile in post.author.profile.following.all %}
                                        | Follows You
                                    {% endif %}
                                </div>
                            </div>
                                
                        </div>
                        <div>
                            {% if request.user.is_authenticated %}
                            {% if request.user == post.author %}
                            <div class="dropdown">
                                <button class="btn btn-link dropdown-toggle" type="button" id="gedf-drop1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                </button>
                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="gedf-drop1">
                                    
                                        <a class="dropdown-item" href="{{post.post_edit_url}}">Edit</a>
                                        <a class="dropdown-item" href="" data-toggle="modal" data-target="#confirm-delete{{post.slug}}">Delete</a>
                                        
                                    
                                    

                                </div>
                            </div>
                            {% endif %}
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="card-body"><a  class="text-dark userlinkname" href="{{post.get_absolute_url_2}}">
                    <div class="text-muted h7 mb-2">
                        <i class="fa fa-clock-o"></i> {{post.date_posted|timesince}} ago 
                        {% if post.draft %}
                            <b class="fa fa-lock" data-toggle="tooltip" data-placement="top" title="private"></b>
                        {% endif %}
                    </div>
                    
                        <p id="content{{post.id}}" class="card-text">
                            {{post.content}}
                        </p>
                    {% if post.links %}
                    
                    <script type="text/javascript">
                        $("#content{{post.id}}").each(function() {
                        var text = $(this).html()
                        //alert("1- "+text)
                        {% for link in post.links_all %}
                        var link2 = '{{link}}'.replace(" ","");
                        var link3 = '{{link|truncatechars:30}}'.replace(" ","");
                        //text = text.replace('{{link}}',"<a href='{{link}}'>{{link}}</a>");
                        text = text.replace('{{link}}'," <a class='userlinkname' target='_blank' href='"+link2+"'>"+link3+"</a> ");

                        {% endfor %}
                        //alert("2- "+text)
                        $(this).html(text);
                        });

                    </script>
                    

                    {% endif %}
                        {% if post.image %}
                            <img class="card-img profile blur" height="375px" src="https://drive.google.com/thumbnail?id=19s9HLijaKopNDDWZ2TFYmxehLHybqkSj" id="i{{post.id}}">
                            <script type="text/javascript">
                                var img_S2{{ post.id }} = document.getElementById("i{{ post.id }}")
                                var img_B2{{ post.id }} = document.createElement('img')
                                img_B2{{ post.id }}.onload = function(){
                                    img_S2{{ post.id }}.src = this.src
                                    img_S2{{ post.id }}.className = "card-img profile noblur";

                            
                                }
                                setTimeout(function(){
                                img_B2{{ post.id }}.src = '{{post.image.url}}' 
                                },50)  

                          
                            </script>
                        {% endif %}
                    </a>
                </div>
                <div class="card-footer">
                    {% if request.user.is_authenticated %}

                        {% if request.user.profile in post.likes.all %}
                            <a id="{{post.id}}" href="{{post.add_like_url}}" data-href="{{post.api_add_like_url}}" class="card-link text-primary LikeBtn IconBtn "><i class="fa fa-heart "></i> <b class="LikeCount{{post.id}}" num='{{post.likes.count}}'>{{post.likes.count}}</b></a>
                        {% else %}
                            <a id="{{post.id}}" href="{{post.add_like_url}}" data-href="{{post.api_add_like_url}}" class="card-link text-secondary LikeBtn IconBtn "><i class="fa fa-heart "></i> <b class="LikeCount{{post.id}}" num='{{post.likes.count}}'>{{post.likes.count}}</b></a>
                        {% endif %}

                    {% else %}
                        <a  href="{% url 'login' %}"  class="card-link text-secondary  IconBtn "><i class="fa fa-heart "></i> <b>{{post.likes.count}}</b></a>

                    {% endif %}
                        <n class="card-link text-secondary IconBtn"><i class="fa fa-comment"></i><b> {{post.comments_all.count}}</b></n>

                        <a  id="c{{post.id}}" href="" link='http://localhost:8000{{post.get_absolute_url_2}}'  class="card-link text-secondary IconBtn ShareBtn"><i class="fa fa-share-alt"></i></a>
                </div>
            </div>
            {% if request.user == post.author %}
                <div class="modal fade" id="confirm-delete{{post.slug}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5>Delete Post</h5>
                            </div>
                            <div class="modal-body">
                                <h5>Are you sure you want to <b>delete</b> this post?</h5>
                            </div>
                            <div class="modal-footer">                   
                                <a id="post{{post.slug}}" class="btn btn-danger btn-ok PostDelete " href="{{user.profile.get_absolute_url}}" data-href='{{post.delete_post_api_url}}'> 
                                    Yes, Delete <b> </b>
                                </a>
                                <button type="button" class="btn btn-default close1" data-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}
                <br class="d-block d-lg-none">
        
                
    {% endfor %}
{% endif %}

<div style="text-align: center;" class="loadingIcon"><h1 class=""></h1></div>
</div>



    
</div>

{% else %}

{% if messages %}
<div class="card">
  <ul class="list-unstyled messages">
  {% for message in messages %}
    
      <li class="alert alert-{{ alert_tag }}">{{ message }}</li>
   
  </ul>
  {% endfor %}
</div>
{% endif %}


<style type="text/css">
.blur{
filter: blur(2px);
transition: all 1s;
}

.noblur{
    transition: all 2s;
}
</style>

<div class="section  ">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
            </div>
        </div>
        <div class="row">
{% for profile in profiles %}
            <div class="col-md-6 col-lg-6 col-xl-4 profile-pad ProfileData">
                <div class="card profile-card-2">
                    <div class="card-img-block">
                        <img class="img-fluid b_img_B blur" id="{{ profile.slug }}" width="1200" height="300" src="https://drive.google.com/thumbnail?id=19s9HLijaKopNDDWZ2TFYmxehLHybqkSj" alt="Card image cap" />
                        
                    </div>

                    <script type="text/javascript">
                        var b_img_S{{ profile.slug }} = document.getElementById("{{ profile.slug }}")
                        var b_img_B{{ profile.slug }} = document.createElement('img')
                        b_img_B{{ profile.slug }}.onload = function(){
                            b_img_S{{ profile.slug }}.src = this.src
                            b_img_S{{ profile.slug }}.className = "img-fluid b_img_B noblur";
                        }

                        setTimeout(function(){
                           b_img_B{{ profile.slug }}.src = '{{ profile.background_image.url }}' ;
                           
                       },50)



                      
                    </script>
                        
                    
                    <div class="card-body pt-5">
                        <a href="{{profile.get_absolute_url}}">
                            <img width="75" height="75" src="https://drive.google.com/thumbnail?id=1hn-jqy47zD8v0RnKzd9WufbxgBloDrsn" id="p{{profile.slug}}" alt="profile-image" class="profile"/>
                        </a>
                    <script type="text/javascript">
                        var img_S{{ profile.slug }} = document.getElementById("p{{ profile.slug }}")
                        var img_B{{ profile.slug }} = document.createElement('img')
                        img_B{{ profile.slug }}.onload = function(){
                            img_S{{ profile.slug }}.src = this.src
                        }
                        setTimeout(function(){
                           img_B{{ profile.slug }}.src = '{{ profile.image.url }}' 
                        },50)  

                          
                    </script>
                        
                        <a href="{{profile.get_absolute_url}}" class="userlinkname">

                            <h5 class="card-title">{{profile.user.first_name|truncatechars:15}}
                                {% if profile.veryfied %}
                                    <li class="material-icons  ml-1" data-toggle="tooltip" data-placement="top" title="Trusted" style="color:#007bff;">done_all</li>
                                    
                                {% endif %}
                                
                            </h5>


                        </a>
                        {% if profile.veryfied %}
                            <p class="lead" style="position: absolute;top:75px;font-size: 15px">
                                {{profile.user.username|truncatechars:15}} | {{profile.followers.count}} followers
                                {% if user.profile in profile.following.all %}
                                    | Follows You
                                {% endif %}
                            </p>
                        {% else %}
                            <p class="lead" style="position: absolute;top:73px;font-size: 15px">
                                {{profile.user.username|truncatechars:15}} | {{profile.followers.count}} followers
                                {% if user.profile in profile.following.all %}
                                    | Follows You
                                {% endif %}
                            </p>                        
                        {% endif %}

                        {% if user.is_authenticated %}
                        <link href="https://fonts.googleapis.com/css?family=Varela+Round&display=swap" rel="stylesheet">

                            {% if profile.user == user %}
                               
                            {% else %}
                                {% if user.profile in profile.followers.all %}
                                    <a data-href='{{profile.api_follow_url}}' style="font-family: 'Varela Round', sans-serif;" href="{{profile.api_follow_url}}"  class="btn btn-light ConnectBtn FollowBtn" ><b class=""></b> FOLLOWING</a> 
                                {% else %}
                                    <a data-href='{{profile.api_follow_url}}' style="font-family: 'Varela Round', sans-serif;" href="{{profile.api_follow_url}}" class="btn btn-outline-info ConnectBtn FollowBtn" ><b class=""></b> FOLLOW
                                    </a>
                                {% endif %}

                                                                    
                            {% endif %}

                        {% else %}
                                <a  style="font-family: 'Varela Round', sans-serif;" href="{% url 'login' %}" class="btn btn-outline-info ConnectBtn FollowBtn" ><b class=""></b> FOLLOW
                                    </a>
                        {% endif %}


                        {% if profile.description == '' %}

                            <p class="card-text mt-4">...</p>

                        {% else %}

                            <p class="card-text mt-4">{{profile.description|truncatechars:35}}</p>
                        
                        {% endif %}
                        <hr>

                        {% if not profile.facebock and not profile.twitter and not  profile.linkedin and not profile.instagram and not profile.reddit and not profile.snapchat and not profile.youtube and not profile.email %}
                            <p class="space"></p>
                        {% endif %}
                        <div class="icon-block">
                            {% if profile.facebock %}
                                <a href="{{profile.facebock}}" target="_blank">
                                    <i class="fa fa-facebook" data-toggle="tooltip" data-placement="top" title="{{profile.facebock|truncatechars:25}}"></i>
                                </a>
                            {% endif %}

                            {% if profile.twitter %}
                                <a href="{{profile.twitter}}" target="_blank">
                                    <i class="fa fa-twitter" data-toggle="tooltip" data-placement="top" title="{{profile.twitter|truncatechars:25}}"></i>
                                </a>
                            {% endif %}

                            {% if profile.linkedin %}
                                <a href="{{profile.linkedin}}" target="_blank">
                                    <i class="fa fa-linkedin" data-toggle="tooltip" data-placement="top" title="{{profile.linkedin|truncatechars:25}}"></i>
                                </a>
                            {% endif %}

                            {% if profile.instagram %}
                                <a href="{{profile.instagram}}" target="_blank">
                                    <i class="fa fa-instagram" data-toggle="tooltip" data-placement="top" title="{{profile.instagram|truncatechars:25}}"></i>
                                </a>
                            {% endif %}

                            {% if profile.reddit %}
                                <a href="{{profile.reddit}}" target="_blank">
                                    <i class="fa fa-reddit" data-toggle="tooltip" data-placement="top" title="{{profile.reddit|truncatechars:25}}"></i>
                                </a>
                            {% endif %}

                            {% if profile.snapchat %}
                                <a href="{{profile.snapchat}}" target="_blank">
                                    <i class="fa fa-snapchat" data-toggle="tooltip" data-placement="top" title="{{profile.snapchat|truncatechars:25}}"></i>
                                </a>
                            {% endif %}

                            {% if profile.youtube %}
                                <a href="{{profile.youtube}}" target="_blank">
                                    <i class="fa fa-youtube-play" data-toggle="tooltip" data-placement="top" title="{{profile.youtube|truncatechars:25}}"></i>
                                </a>
                            {% endif %}
                            {% if profile.email %}
                                <a href="mailto:{{profile.email}}" data-toggle="tooltip" data-placement="top" title="{{profile.email|truncatechars:15}}">
                                    <i class="fa fa-envelope"></i>
                                </a>
                            {% endif %}

                        </div>
                    </div>
                </div>
            </div>

{% endfor %}
        </div>
    </div>
</div>
         




            
{% endif %}


{% endblock %}
 




{% block javascript %}

{% if user.is_authenticated %}


<script type="text/javascript">


$(function(){
function LoadMore(posts){
    var posts_loaded = posts
    this_ = $("#LoadMorePost")
    $.ajax({
        url: '{{profile.load_more_post_url}}',
        method: 'GET',
        data: {'posts_loaded':posts_loaded},
        success: function (data) {
            console.log(data.posts)
            var posts = JSON.parse(data.posts)
            $.each(posts, function (key, value) {
                console.log(key+":"+value.fields.content)
                console.log(key+":"+value.fields.slug)
                console.log(key+":"+value.fields.image)
                this_.after()
            });
            },
        error: function (error) {
            console.log(error)

        },


    })
}




$('.LoadMoreBtn').click(function(e){
    e.preventDefault()
    var this_ = $(this)
    last_id = $(".PostData:last").attr("pk")
    alert(last_id)
    $.ajax({
        url: '/loadmoreposts/',
        method: 'GET',
        data: {"last_id":last_id},
        success: function (data) {
            $(".PostData:last").after("<h1 class='PostData' pk='67'>haha</h1>")
            //post_list = JSON.parse('{{active.post_list}}')
            //console.log('{{active.post_list}}')
            
            thedata = data.posts
            console.log(thedata)
            $.each(thedata, function(i, value){
                var time = new Date(value.fields.date_posted)
                var date_posted = jQuery.timeago(value.fields.date_posted)
                console.log(i,value.fields.content,value.fields.author);
            });



        },
        error: function (error) {
            console.log(error)

        }


    })
});



$('.FollowBtn').click(function(e){
    e.preventDefault()
    var this_ = $(this)
    this_.attr('class','btn btn-outline-info ConnectBtn FollowBtn')
    this_.children().attr('class','fa fa-cog fa-spin')
    var loading = this_.children()
    var FollowUrl = this_.attr("data-href")
    $.ajax({
        url: FollowUrl,
        method: 'GET',
        data: {},
        success: function (data) {
            console.log(data)
            if (data.followed){
                updateBtn(this_,loading)
            }
            else {
                updateBtn2(this_,loading)
            }

        },
        error: function (error) {
            console.log(error)

        }


    })


});






$('.FollowBtn2').click(function(e){
    e.preventDefault()
    var this_ = $(this)
    var id = this_.attr('id')
    var btnid = ('.'+id)
    var btn2 = $(btnid)
    this_.attr('class','btn btn-outline-info ConnectBtn FollowBtn2')
    btn2.attr('class','btn btn-outline-info ConnectBtn FollowBtn2')
    btn2.children().attr('class','fa fa-cog fa-spin')
    var loading = btn2.children()
    var FollowUrl = this_.attr("data-href")
    $.ajax({
        url: FollowUrl,
        method: 'GET',
        data: {},
        success: function (data) {
            console.log(data)
            if (data.followed){
                updateBtn3(this_,btn2,id,loading)
            }
            else {
                updateBtn4(this_,btn2,id,loading)
            }

        },
        error: function (error) {
            console.log(error)

        }


    })
});








$('.LikeBtn').click(function(e){
    e.preventDefault()
    var this_ = $(this)

    var LikeUrl = this_.attr("data-href")
    var id = this_.attr("id")
    $.ajax({
        url: LikeUrl,
        method: 'GET',
        data: {},
        success: function (data) {
            console.log(data)

            if (data.like){

                this_.attr('class','card-link text-primary LikeBtn IconBtn')
                var likesOld = $('.LikeCount'+id).attr('num')
                var likes = parseInt(likesOld)+1
                $('.LikeCount'+id).attr('num',likes)
                $('.LikeCount'+id).text(likes)
                
                
            }
            else{
                this_.attr('class','card-link text-secondary LikeBtn IconBtn')
                var likesOld2 = $('.LikeCount'+id).attr('num')
                var likes2 = parseInt(likesOld2)-1
                $('.LikeCount'+id).attr('num',likes2)
                $('.LikeCount'+id).text(likes2)
            }
        },
        error: function (error) {
            console.log(error)

        }


    })
});



});    

$('.PostDelete').click(function(e){
    e.preventDefault()
    var this_ = $(this)
    this_.attr('class','btn btn-danger btn-ok PostDelete disabled')
    this_.children().attr('class','fa fa-cog fa-spin')

    id = this_.attr('id')
    id2 = '#id'+id

    var DeleteUrl = this_.attr("data-href")
    $.ajax({
        url: DeleteUrl,
        method: 'GET',
        data: {},
        success: function (data) {
            console.log(data)
            $('.close1').click()
            $(id2).remove()
           



        },
        error: function (error) {
            console.log(error)

        }


    })
    
    
});

function DeletePostFunction(en){
    var this_ = $('#'+ en.id)
    var LikeUrl = this_.attr("data-href")
    
    this_.attr('class','btn btn-danger btn-ok PostDelete disabled text-white ')
    this_.children().attr('class','fa fa-cog fa-spin')

    id = en.id
    id2 = '#id'+id

    var DeleteUrl = this_.attr("data-href")
    $.ajax({
        url: DeleteUrl,
        method: 'GET',
        data: {},
        success: function (data) {
            console.log(data)
            $('.close1').click()
            $(id2).hide()
           



        },
        error: function (error) {
            console.log(error)

        }


    })
}

function LikePostBtn(en){
    var this_ = $('#'+ en.id)
    
    var LikeUrl = this_.attr("data-href")
    var id = en.id
    $.ajax({
        url: LikeUrl,
        method: 'GET',
        data: {},
        success: function (data) {
            console.log(data)

            if (data.like){

                this_.attr('class','card-link text-primary LikeBtn IconBtn pointer')
                var likesOld = $('.LikeCount'+id).attr('num')
                var likes = parseInt(likesOld)+1
                $('.LikeCount'+id).attr('num',likes)
                $('.LikeCount'+id).text(likes)
                
                
            }
            else{
                this_.attr('class','card-link text-secondary LikeBtn IconBtn pointer')
                var likesOld2 = $('.LikeCount'+id).attr('num')
                var likes2 = parseInt(likesOld2)-1
                $('.LikeCount'+id).attr('num',likes2)
                $('.LikeCount'+id).text(likes2)
            }
        },
        error: function (error) {
            console.log(error)

        }


    })
}

</script>


{% endif %}
<script type="text/javascript">

$('.ShareBtn').click(function(e){
    e.preventDefault()
    var this_ = $(this)
    var id    = this_.attr('id')
    var element = '#'+id
    
    var temp = $("<input>")
    $("body").append(temp);
    temp.val($(element).attr('link')).select();
    document.execCommand("copy");
    temp.remove();
    $(".copyText").remove()
    $(element).after('<i class="copyText"> link copied</i>')
    $(".copyText").delay(2000).fadeOut( 400 )


})

function ShareBtnFunction(en){
    var id = en.id
    var element = '#'+id
    var temp = $("<input>")
    $("body").append(temp);
    temp.val($(element).attr('link')).select();
    document.execCommand("copy");
    temp.remove();
    $(".copyText").remove()
    $(element).after('<i class="copyText"> link copied</i>')
    $(".copyText").delay(2000).fadeOut( 400 )
}

{% if active.RecommendedPosts %}

var working = false;



$(window).scroll(function(e){
    e.preventDefault()
    var this_ = $(this)
    last_id = $(".PostData:last").attr("pk")
    
    if ($(this).scrollTop() + 1 >= $('body').height() - $(window).height()) {
        //alert('1:'+working)
        
        
        if (working == false) {
            working = true
            //alert('2:'+working)
            $('.loadingIcon').children().attr('class','fa fa-cog fa-spin text-info display-4')
            setTimeout(function() {
                $('.loadingIcon').children().attr('class','')
                
                
                }, 10000)

        $.ajax({
            url: '/loadmoreposts/',
            method: 'GET',
            data: {"last_id":last_id},

            success: function (data) {
                $('.loadingIcon').children().attr('class','')
            
                thedata = data.posts
                console.log(thedata)
                
                $.each(thedata, function(i, value){
                    console.log(i,value.fields.content,value.fields.author);
                    var time = new Date(value.fields.date_posted)
                    var date_posted2 = jQuery.timeago(time)
                    var date_posted = date_posted2.replace("about","");
                    
                    var fields = value.fields
                    var urls = value.urls
                    var functions = value.functions

                    var post_image = ''

                    if (fields.image == false){
                        post_image = ''
                    }else {
                        post_image = '<br><img class="card-img profile " height="375px" src="'+fields.image+'" id="i'+fields.id+'">'

                                    

                    }
                    var follows_you = ''

                    if (fields.follows_you == false){
                        follows_you = ''
                    }else {
                        follows_you = ' | <n class="bg-light"> Follows You</n>'
                    }

                    var veryfied = ''

                    if (fields.is_veryfied == false){
                        veryfied = ''
                    }else {
                        veryfied = ' <li class="material-icons mb-1" data-toggle="tooltip" data-placement="top" title="Trusted" style="color:#007bff;">done_all</li>'
                    }


                    var dropdown = ''

                    if (fields.post_for_you == false){
                        dropdown2 = '<div class="dropdown"><button class="btn btn-link dropdown-toggle" type="button" id="gedf-drop1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="gedf-drop1"><a class="dropdown-item" href="#">Report</a></div></div>'
                    }else {
                        dropdown = '<div class="dropdown"><button class="btn btn-link dropdown-toggle" type="button" id="gedf-drop1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="gedf-drop1"><a class="dropdown-item" href="'+urls.post_edit_url+'">Edit</a><a class="dropdown-item" href="" data-toggle="modal" data-target="#confirm-delete'+fields.slug+'">Delete</a></div></div><div class="modal fade" id="confirm-delete'+fields.slug+'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5>Delete Post</h5></div><div class="modal-body"><h5>Are you sure you want to <b>delete</b> this post?</h5></div><div class="modal-footer"><a id="post'+fields.slug+'"  class="pointer text-white btn btn-danger btn-ok PostDelete " onClick="DeletePostFunction(post'+ fields.slug +')" data-href="'+urls.post_delete_url+'">Yes, Delete <b> </b></a><button type="button" class="btn btn-default close1" data-dismiss="modal">Cancel</button></div></div></div></div>'
                    }
                    var liked = ''

                    if (fields.liked == false){
                        liked = '<a id="postnew'+ fields.id+'"  data-href="'+urls.api_add_like_url+'" onClick="LikePostBtn(postnew'+ fields.id +')" class="card-link text-secondary LikeBtn IconBtn pointer"><i class="fa fa-heart "></i> <b class="LikeCountpostnew'+ fields.id+'" num='+fields.likes+'>'+fields.likes+'</b></a>'
                    }else {
                        liked = '<a id="postnew'+ fields.id+'"  data-href="'+urls.api_add_like_url+'" onClick="LikePostBtn(postnew'+ fields.id +')" class="card-link text-primary LikeBtn IconBtn pointer"><i class="fa fa-heart "></i> <b class="LikeCountpostnew'+ fields.id+'" num='+fields.likes+'>'+fields.likes+'</b></a>'
                    }

                    
                    var the_links = functions.links_all

                    var the_content = fields.content
                    if (the_links == ''){
                        
                    } else {

                            $.each(the_links, function(i, value){

                                var link3 = value.replace(" ","");
                                link4 = (link3.substr(0,30) + "...");

                                the_content = the_content.replace(value," <a class='userlinkname' target='_blank' href='"+link3+"'>"+link4+"</a>");

                            })
           
                    } 


                    all_the_content = $("<a>", {href: urls.get_absolute_url_2, "class": "text-dark userlinkname"}).html('<div class="text-muted h7 mb-2"><i class="fa fa-clock-o"></i> '+date_posted+' </div><p id="content'+fields.id+'" class="card-text">'+the_content+'</p>'+post_image)
                    
                    

                    var div_content = '<ee class="thedatapost'+fields.slug+'"></ee>'

                    Name = $.trim((fields.Name))
                    
                    LoadTheNewPosts(
                        the_content,
                        value.pk,
                        fields.slug,
                        urls.profile_url,
                        fields.id,
                        fields.profile_image,
                        fields.Name,
                        fields.author,
                        post_image,
                        fields.likes,
                        urls.get_absolute_url_2,
                        date_posted,
                        follows_you,
                        veryfied,
                        dropdown,
                        functions.comments_all,
                        liked,
                        div_content,
                        all_the_content
                        )
                    
                });
                setTimeout(function() {
                    working = false;
                    //alert('3:'+working)
                }, 400)



            },
            error: function (error) {
                
                console.log(error)

            }


        })}
    }
});
function LoadTheNewPosts(content,pk,slug,profile_url,post_id,profile_image,Name,username,post_image,likes,post_url,time,follows_you,is_veryfied,dropdown,comments_all,liked,div_content,all_the_content){
    $(".PostData:last").after('<br class="d-block d-lg-none"><div class="card gedf-card PostData" id="idpost'+slug+'" pk="'+pk+'"><div class="card-header"><div class="d-flex justify-content-between align-items-center"><div class="d-flex justify-content-between align-items-center"><div class="profile-card-22 ml-3"><a href="'+profile_url+'"><img  id="p'+post_id+'" class="rounded-circle profile " width="45" height="45" src="'+profile_image+'" alt=""></a></div><div><a href="'+profile_url+'" class="card-title userlinkname"><div class="h5 m-0 ">'+Name+is_veryfied+'</div></a><div class="h7 text-muted">'+username + follows_you+'</div></div></div><div>{% if request.user.is_authenticated %}'+dropdown+'{% endif %}</div></div></div><div class="card-body">'+div_content+'</div><div class="card-footer">{% if request.user.is_authenticated %}'+liked+'{% else %}<a  href="{% url "login" %}"  class="card-link text-secondary  IconBtn "><i class="fa fa-heart "></i> <b>'+likes+'</b></a>{% endif %}<n class="card-link text-secondary IconBtn"><i class="fa fa-comment"></i><b> '+comments_all+'</b></n><a  id="c'+post_id+'" onClick="ShareBtnFunction(c'+ post_id +')" link="http://localhost:8000'+post_url+'"  class="card-link text-secondary IconBtn ShareBtn pointer"><i class="fa fa-share-alt"></i></a></div></div>')
    $(".thedatapost"+slug).append(all_the_content)
    
}

{% endif %}


{% if active.NoramlPosts %}
var working = false;

var posts_loaded = 10

$(window).scroll(function(e){

    e.preventDefault()
    var this_ = $(this)
  
    
    if ($(this).scrollTop() + 1 >= $('body').height()  - $(window).height()) {
     
        
        if (working == false) {
            working = true
            
            $('.loadingIcon').children().attr('class','fa fa-cog fa-spin text-info display-4')
            setTimeout(function() {
                $('.loadingIcon').children().attr('class','')
                
                
                }, 10000)

        $.ajax({
            url: '{% url "load-more-post-search" %}',
            method: 'GET',
            data: {'posts_loaded':posts_loaded,'query':'{{active.query}}'},


            success: function (data) {
                $('.loadingIcon').children().attr('class','')
                posts_loaded+=5
            
                thedata = data.posts
                console.log(thedata)
                
                $.each(thedata, function(i, value){
                    console.log(i,value.fields.content,value.fields.author);
                    var time = new Date(value.fields.date_posted)
                    var date_posted2 = jQuery.timeago(time)
                    var date_posted = date_posted2.replace("about","");
                    
                    var fields = value.fields
                    var urls = value.urls
                    var functions = value.functions

                    var post_image = ''

                    if (fields.image == false){
                        post_image = ''
                    }else {
                        post_image = '<br><img class="card-img profile " height="375px" src="'+fields.image+'" id="i'+fields.id+'">'

                                    

                    }
                    var follows_you = ''

                    if (fields.follows_you == false){
                        follows_you = ''
                    }else {
                        follows_you = ' | <n class="bg-light"> Follows You</n>'
                    }

                    var veryfied = ''

                    if (fields.is_veryfied == false){
                        veryfied = ''
                    }else {
                        veryfied = ' <li class="material-icons mb-1" data-toggle="tooltip" data-placement="top" title="Trusted" style="color:#007bff;">done_all</li>'
                    }


                    var dropdown = ''

                    if (fields.post_for_you == false){
                        dropdown2 = '<div class="dropdown"><button class="btn btn-link dropdown-toggle" type="button" id="gedf-drop1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="gedf-drop1"><a class="dropdown-item" href="#">Report</a></div></div>'
                    }else {
                        dropdown = '<div class="dropdown"><button class="btn btn-link dropdown-toggle" type="button" id="gedf-drop1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="gedf-drop1"><a class="dropdown-item" href="'+urls.post_edit_url+'">Edit</a><a class="dropdown-item" href="" data-toggle="modal" data-target="#confirm-delete'+fields.slug+'">Delete</a></div></div><div class="modal fade" id="confirm-delete'+fields.slug+'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5>Delete Post</h5></div><div class="modal-body"><h5>Are you sure you want to <b>delete</b> this post?</h5></div><div class="modal-footer"><a id="post'+fields.slug+'"  class="pointer text-white btn btn-danger btn-ok PostDelete " onClick="DeletePostFunction(post'+ fields.slug +')" data-href="'+urls.post_delete_url+'">Yes, Delete <b> </b></a><button type="button" class="btn btn-default close1" data-dismiss="modal">Cancel</button></div></div></div></div>'
                    }
                    var liked = ''

                    if (fields.liked == false){
                        liked = '<a id="postnew'+ fields.id+'"  data-href="'+urls.api_add_like_url+'" onClick="LikePostBtn(postnew'+ fields.id +')" class="card-link text-secondary LikeBtn IconBtn pointer"><i class="fa fa-heart "></i> <b class="LikeCountpostnew'+ fields.id+'" num='+fields.likes+'>'+fields.likes+'</b></a>'
                    }else {
                        liked = '<a id="postnew'+ fields.id+'"  data-href="'+urls.api_add_like_url+'" onClick="LikePostBtn(postnew'+ fields.id +')" class="card-link text-primary LikeBtn IconBtn pointer"><i class="fa fa-heart "></i> <b class="LikeCountpostnew'+ fields.id+'" num='+fields.likes+'>'+fields.likes+'</b></a>'
                    }

                    
                    var the_links = functions.links_all
                   
                   
                    var the_content = fields.content
                    if (the_links == ''){
                        
                    } else {  
                            $.each(the_links, function(i, value){
                                var link3 = value.replace(" ","");
                                link4 = (link3.substr(0,30) + "...");


                                the_content = the_content.replace(value," <a class='userlinkname' target='_blank' href='"+link3+"'>"+link4+"</a>");
                                
                            }) 
                            


                }


                    
                    all_the_content = $("<a>", {href: urls.get_absolute_url_2, "class": "text-dark userlinkname"}).html('<div class="text-muted h7 mb-2"><i class="fa fa-clock-o"></i> '+date_posted+' </div><p id="content'+fields.id+'" class="card-text">'+the_content+'</p>'+post_image)
                    

                    var div_content = '<ee class="thedatapost'+fields.slug+'"></ee>'

                    
                    LoadTheNewPosts(
                        the_content,
                        value.pk,
                        fields.slug,
                        urls.profile_url,
                        fields.id,
                        fields.profile_image,
                        fields.Name,
                        fields.author,
                        post_image,
                        fields.likes,
                        urls.get_absolute_url_2,
                        date_posted,
                        follows_you,
                        veryfied,
                        dropdown,
                        functions.comments_all,
                        liked,
                        div_content,
                        all_the_content
                        )
                    
                });
                setTimeout(function() {
                    working = false;
                    //alert('3:'+working)
                }, 300)



            },
            error: function (error) {
                
                console.log(error)

            }


        })}
    }
});
function LoadTheNewPosts(content,pk,slug,profile_url,post_id,profile_image,Name,username,post_image,likes,post_url,time,follows_you,is_veryfied,dropdown,comments_all,liked,div_content,all_the_content){
    $(".PostData:last").after('<br class="d-block d-lg-none"><div class="card gedf-card PostData" id="idpost'+slug+'" pk="'+pk+'"><div class="card-header"><div class="d-flex justify-content-between align-items-center"><div class="d-flex justify-content-between align-items-center"><div class="profile-card-22 ml-3"><a href="'+profile_url+'"><img  id="p'+post_id+'" class="rounded-circle profile " width="45" height="45" src="'+profile_image+'" alt=""></a></div><div><a href="'+profile_url+'" class="card-title userlinkname"><div class="h5 m-0 ">'+Name+is_veryfied+'</div></a><div class="h7 text-muted">'+username + follows_you+'</div></div></div><div>{% if request.user.is_authenticated %}'+dropdown+'{% endif %}</div></div></div><div class="card-body">'+div_content+'</div><div class="card-footer">{% if request.user.is_authenticated %}'+liked+'{% else %}<a  href="{% url "login" %}"  class="card-link text-secondary  IconBtn "><i class="fa fa-heart "></i> <b>'+likes+'</b></a>{% endif %}<n class="card-link text-secondary IconBtn"><i class="fa fa-comment"></i><b> '+comments_all+'</b></n><a  id="c'+post_id+'" onClick="ShareBtnFunction(c'+ post_id +')" link="http://localhost:8000'+post_url+'"  class="card-link text-secondary IconBtn ShareBtn pointer"><i class="fa fa-share-alt"></i></a></div></div>')
    $(".thedatapost"+slug).append(all_the_content)
    
}
{% endif %}
{% if active.JusetUsers %}
var working = false;

var posts_loaded = 12

$(window).scroll(function(e){

    e.preventDefault()
    var this_ = $(this)
  
    
    if ($(this).scrollTop() + 1 >= $(document).height() - $(window).height()) {
     
        
        if (working == false) {
            working = true
            
            $('.loadingIcon').children().attr('class','fa fa-cog fa-spin text-info display-4')
            setTimeout(function() {
                $('.loadingIcon').children().attr('class','')
                    
                }, 10000)

        $.ajax({
            url: '{% url "load-more-profiles" %}',
            method: 'GET',
            data: {'posts_loaded':posts_loaded,'query':'{{active.query}}'},


            success: function (data) {
                $('.loadingIcon').children().attr('class','')
                posts_loaded+=6
            
                thedata = data.posts
                console.log(thedata)
                
                $.each(thedata, function(i, value){
                    console.log(i,value.fields.username);
                    
                    var fields = value.fields
                    var urls = value.urls
                    var functions = value.functions
                  

                    var follows_you = ''

                    if (fields.follows_you == false){
                        follows_you = ''
                    }else {
                        follows_you = ' | <n class="bg-light"> Follows You</n>'
                    }

                    var veryfied = ''

                    if (fields.is_veryfied == false){
                        veryfied = ''
                    }else {
                        veryfied = ' <li class="material-icons mb-1" data-toggle="tooltip" data-placement="top" title="Trusted" style="color:#007bff;">done_all</li>'
                    }
                    description = '<p class="card-text mt-4">...</p>'
                    if (fields.description != ""){
                        description = fields.description
                    }

                    var no_links = ''

                    if (fields.no_links == false){
                        no_links = ''
                    }else {
                        no_links = '<p class="space"></p>'
                    }

                    {% if user.is_authenticated %}
                    var follow_btn = ''
                    if (fields.followed == false){
                        follow_btn = '<a onClick="FollowFunction(profile'+ fields.slug +')" id="profile'+ fields.slug +'"  data-href='+urls.follow_api_url+'  style="font-family: "Varela Round", sans-serif;"  class="btn btn-outline-info ConnectBtn FollowBtn pointer text-info" ><b class=""></b> FOLLOW</a>'
                    }else{
                        follow_btn = '<a onClick="FollowFunction(profile'+ fields.slug +')" id="profile'+ fields.slug +'" data-href='+urls.follow_api_url+' style="font-family: "Varela Round", sans-serif;"  class="btn btn-light ConnectBtn FollowBtn pointer" ><b class=""></b> FOLLOWING</a>'
                    }
                    {% else %}
                    var follow_btn = '<a  style="font-family: "Varela Round", sans-serif;" href="{% url "login" %}" class="btn btn-outline-info ConnectBtn FollowBtn" ><b class=""></b> FOLLOW</a>'
            
                    {% endif %}

                    var twitter = ''
                    if (fields.twitter != null & fields.twitter != ""){
                        twitter = '<a href="'+fields.twitter+'" target="_blank"><i class="fa fa-twitter" data-toggle="tooltip" data-placement="top" title="'+fields.twitter+'"></i></a>'
                    }


                    var youtube = ''
                    if (fields.youtube != null & fields.youtube != ""){
                        youtube = '<a href="'+fields.youtube+'" target="_blank"><i class="fa fa-youtube-play" data-toggle="tooltip" data-placement="top" title="'+fields.youtube+'"></i></a>'
                    } 

                    var facebock = ''
                    if (fields.facebock != null & fields.facebock != ""){
                        facebock = '<a href="'+fields.facebock+'" target="_blank"><i class="fa fa-facebook" data-toggle="tooltip" data-placement="top" title="'+fields.facebock+'"></i></a>'
                    } 


                    var instagram = ''
                    if (fields.instagram != null & fields.instagram != ""){
                        instagram = '<a href="'+fields.instagram+'" target="_blank"><i class="fa fa-instagram" data-toggle="tooltip" data-placement="top" title="'+fields.instagram+'"></i></a>'
                    } 
                    
                    LoadTheNewPosts(
                        description,
                        value.pk,
                        fields.slug,
                        urls.get_absolute_url,
                        fields.id,
                        fields.profile_image,
                        fields.Name,
                        fields.username,
                        fields.background_image,
                        follows_you,
                        veryfied,
                        no_links,
                        follow_btn,
                        twitter,
                        youtube,
                        facebock,
                        instagram,
                        fields.followers
                        ) 
                    
                });
                setTimeout(function() {
                    working = false;
                    //alert('3:'+working)
                }, 300)



            },
            error: function (error) {
                
                console.log(error)

            }


        })}
    }
});
function LoadTheNewPosts(description,pk,slug,profile_url,post_id,profile_image,Name,username,background_image,follows_you,is_veryfied,no_links,follow_btn,twitter,youtube,facebock,instagram,followers){
    $(".ProfileData:last").after('<div class="col-md-6 col-lg-6 col-xl-4 profile-pad ProfileData"><div class="card profile-card-2"><div class="card-img-block"><img class="img-fluid b_img_B" id="'+slug+'" width="1200" height="300" src="'+background_image+'" alt="Card image cap" /></div><div class="card-body pt-5"><a href="'+profile_url+'"><img width="75" height="75" src="'+profile_image+'" id="p'+slug+'" alt="profile-image" class="profile"/></a><a href="'+profile_url+'" class="userlinkname"><h5 class="card-title">'+Name+is_veryfied+'</h5></a><p class="lead" style="position: absolute;top:73px;font-size: 15px">'+username+' | '+followers +' followers' +follows_you+'</p>'+follow_btn+'<p class="card-text mt-4">'+description+'</p><hr>'+no_links+'<div class="icon-block">'+twitter+youtube+facebock+instagram+'</div></div></div></div></div>')
    
}

function FollowFunction(e){

    id_ = "#"+e.id
    var this_ = $(id_)
    this_.attr('class','btn btn-outline-info ConnectBtn FollowBtn')
    this_.children().attr('class','fa fa-cog fa-spin')
    var loading = this_.children()
    var FollowUrl = this_.attr("data-href")
    $.ajax({
        url: FollowUrl,
        method: 'GET',
        data: {},
        success: function (data) {
            console.log(data)
            if (data.followed){
                updateBtn5(this_,loading)
            }
            else {
                updateBtn6(this_,loading)
            }

        },
        error: function (error) {
            console.log(error)

        }


    })
}

function updateBtn(btn,loading){
    btn.attr('class','btn btn-light ConnectBtn  FollowBtn ')
    loading.attr('class','')
    btn.html('<b class=""></b> FOLLOWING')

}

function updateBtn2(btn,loading){
    btn.attr('class','btn btn-outline-info ConnectBtn FolllowBtn ')
    loading.attr('class','')
    btn.html('<b class=""></b> FOLLOW')
    
}




function updateBtn3(btn,btn2,id,loading){
    btn.attr('class','btn btn-light ConnectBtn FollowBtn2'+ id)
    btn2.attr('class','btn btn-light ConnectBtn FollowBtn2 '+ id)
    btn.html('<b class=""></b> FOLLOWING')
    btn2.html('<b class=""></b> FOLLOWING')
    
}

function updateBtn4(btn,btn2,id,loading){
    btn.attr('class','btn btn-outline-info ConnectBtn FollowBtn2 '+ id)
    btn2.attr('class','btn btn-outline-info ConnectBtn FollowBtn2 '+ id)
    btn.html('<b class=""></b> FOLLOW')
    btn2.html('<b class=""></b> FOLLOW')
    
}

function updateBtn5(btn,loading){
    btn.attr('class','btn btn-light ConnectBtn  FollowBtn pointer')
    loading.attr('class','')
    btn.html('<b class=""></b> FOLLOWING')

}

function updateBtn6(btn,loading){
    btn.attr('class','btn btn-outline-info ConnectBtn FolllowBtn pointer text-info')
    loading.attr('class','')
    btn.html('<b class=""></b> FOLLOW')
    
}
{% endif %}

</script>
{% endblock javascript %}


